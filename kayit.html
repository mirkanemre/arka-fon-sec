<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>OtoFonFX | Hediye KayÄ±t</title>
    
    <link rel="stylesheet" href="css/style.css">
    
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>

    <div class="nav-header">
        <a href="javascript:void(0)" onclick="window.history.back()" class="back-link">â® GERÄ°</a>
        <div style="font-size: 0.6rem; color: #48484a; font-weight: 600;">OTOFONFX v2.3.0</div>
    </div>

    <div id="registration-banner" style="display: block; cursor: default;">
        <div class="promo-content" style="text-align: center;">
            <h3 style="font-size: 0.85rem;">ğŸ KAYIT OL, 10 KREDÄ° KAZAN!</h3>
            <p>Bilgilerini doldur, ilk 10 Ã§ekimin bizden olsun.</p>
        </div>
    </div>

    <div class="form-card">
        <div class="input-group">
            <label>Galeri AdÄ± *</label>
            <input type="text" id="galeri-adi" placeholder="Ã–rn: OtoFon Galeri">
        </div>
        
        <div class="input-group">
            <label>Yetkili AdÄ± SoyadÄ± *</label>
            <input type="text" id="yetkili-adi" placeholder="Ad Soyad">
        </div>
        
        <div class="input-group">
            <label>Telefon NumarasÄ± *</label>
            <input type="tel" id="tel-no" placeholder="05XX XXX XX XX">
        </div>
        
        <div class="input-group">
            <label>Åehir *</label>
            <div style="position: relative;">
                <select id="sehir-select">
                    <option value="">LÃ¼tfen Åehir SeÃ§in</option>
                </select>
            </div>
        </div>

        <div class="input-group" style="flex-direction: row; align-items: center; gap: 12px; margin-top: 5px;">
            <input type="checkbox" id="kvkk-check" style="width: 20px; height: 20px; accent-color: var(--primary); cursor: pointer;">
            <label for="kvkk-check" style="font-size: 0.65rem; color: #fff; text-transform: none; padding: 0; cursor: pointer;">
                <span onclick="openKvkk(event)" style="color: var(--primary); text-decoration: underline; font-weight: 800;">KVKK AydÄ±nlatma Metni</span>'ni okudum ve onaylÄ±yorum.
            </label>
        </div>

        <button class="btn-submit" id="submit-btn" onclick="handleRegister()">
            10 Kredimi TanÄ±mla ve Kaydol
        </button>
    </div>

    <div class="footer">
        Â© 2026 OTOFONFX TECHNOLOGIES<br>
        TÃ¼m haklarÄ± OtoFonFX stÃ¼dyosuna aittir.
    </div>

    <div id="kvkk-modal" style="display:none; position: fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.95); z-index:2000; align-items:center; justify-content:center; padding: 20px; backdrop-filter: blur(5px);">
        <div style="background: var(--card-bg); border: 1px solid var(--border); padding: 25px; border-radius: 24px; max-height: 80vh; width: 100%; max-width: 500px; display: flex; flex-direction: column;">
            <h3 style="margin-top: 0; font-family: 'Orbitron'; font-size: 1rem; text-align: center; color: var(--primary);">AYDINLATMA METNÄ°</h3>
            <div style="overflow-y: auto; text-align: left; font-size: 0.7rem; color: #ccc; line-height: 1.6; margin-bottom: 20px; padding-right: 5px;">
                <p><strong>1. Veri Sorumlusu:</strong> Bu aydÄ±nlatma metni, 6698 sayÄ±lÄ± KiÅŸisel Verilerin KorunmasÄ± Kanunu ("KVKK") uyarÄ±nca, kiÅŸisel verilerinizin OtoFonFX tarafÄ±ndan iÅŸlenmesine iliÅŸkin olarak hazÄ±rlanmÄ±ÅŸtÄ±r.</p>
                <p><strong>2. Ä°ÅŸlenen KiÅŸisel Veriler:</strong> Ad-soyad, telefon numarasÄ±, ÅŸehir ve galeri adÄ± bilgileriniz; Ã¼yelik iÅŸlemlerinin yapÄ±lmasÄ± ve hizmetin sunulmasÄ± amacÄ±yla iÅŸlenmektedir.</p>
                <p><strong>3. Ä°ÅŸleme AmaÃ§larÄ±:</strong> Verileriniz, yapay zeka destekli fotoÄŸraf iÅŸleme hizmetinin sunulmasÄ±, bakiye yÃ¼kleme ve iletiÅŸim sÃ¼reÃ§lerinin yÃ¼rÃ¼tÃ¼lmesi amacÄ±yla iÅŸlenir.</p>
                <p><strong>4. HaklarÄ±nÄ±z:</strong> KVKK'nÄ±n 11. maddesi uyarÄ±nca verilerinizin silinmesini veya dÃ¼zeltilmesini talep etme hakkÄ±na sahipsiniz.</p>
                <p style="opacity: 0.6; font-size: 0.6rem;">(Bu metin standart bir Ã¶rnektir, hukuk departmanÄ±nÄ±zÄ±n metni ile gÃ¼ncellenebilir.)</p>
            </div>
            <button onclick="closeKvkk()" class="btn-submit" style="padding: 12px; font-size: 0.7rem;">KAPAT</button>
        </div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.ready(); 
        tg.expand();
        tg.headerColor = "#000000";

        // Åehir Listesi
        const sehirler = ["Adana", "AdÄ±yaman", "Afyonkarahisar", "AÄŸrÄ±", "Aksaray", "Amasya", "Ankara", "Antalya", "Ardahan", "Artvin", "AydÄ±n", "BalÄ±kesir", "BartÄ±n", "Batman", "Bayburt", "Bilecik", "BingÃ¶l", "Bitlis", "Bolu", "Burdur", "Bursa", "Ã‡anakkale", "Ã‡ankÄ±rÄ±", "Ã‡orum", "Denizli", "DiyarbakÄ±r", "DÃ¼zce", "Edirne", "ElazÄ±ÄŸ", "Erzincan", "Erzurum", "EskiÅŸehir", "Gaziantep", "Giresun", "GÃ¼mÃ¼ÅŸhane", "Hakkari", "Hatay", "IÄŸdÄ±r", "Isparta", "Ä°stanbul", "Ä°zmir", "KahramanmaraÅŸ", "KarabÃ¼k", "Karaman", "Kars", "Kastamonu", "Kayseri", "Kilis", "KÄ±rÄ±kkale", "KÄ±rklareli", "KÄ±rÅŸehir", "Kocaeli", "Konya", "KÃ¼tahya", "Malatya", "Manisa", "Mardin", "Mersin", "MuÄŸla", "MuÅŸ", "NevÅŸehir", "NiÄŸde", "Ordu", "Osmaniye", "Rize", "Sakarya", "Samsun", "ÅanlÄ±urfa", "Siirt", "Sinop", "ÅÄ±rnak", "Sivas", "TekirdaÄŸ", "Tokat", "Trabzon", "Tunceli", "UÅŸak", "Van", "Yalova", "Yozgat", "Zonguldak"];
        
        const select = document.getElementById('sehir-select');
        sehirler.forEach(s => {
            let opt = document.createElement('option');
            opt.value = s; 
            opt.innerHTML = s; 
            select.appendChild(opt);
        });

        // KVKK Modal Ä°ÅŸlemleri
        function openKvkk(e) {
            if(e) e.preventDefault(); // Checkbox'Ä±n iÅŸaretlenmesini engelle, sadece metni aÃ§
            document.getElementById('kvkk-modal').style.display = 'flex';
        }
        function closeKvkk() {
            document.getElementById('kvkk-modal').style.display = 'none';
        }

        function handleRegister() {
            const btn = document.getElementById('submit-btn');
            const chat_id = String(tg.initDataUnsafe?.user?.id || "1017604800");
            const user_name = encodeURIComponent(tg.initDataUnsafe?.user?.username || "Bilinmiyor");
            
            // DeÄŸerleri al
            const gAdi = document.getElementById('galeri-adi').value;
            const yAdi = document.getElementById('yetkili-adi').value;
            const tNo = document.getElementById('tel-no').value;
            const sSehir = document.getElementById('sehir-select').value;
            const kvkkOnay = document.getElementById('kvkk-check').checked;

            // Kontrol
            if (!gAdi || !yAdi || !tNo || !sSehir) {
                tg.showAlert("LÃ¼tfen tÃ¼m alanlarÄ± doldurunuz!");
                return;
            }

            // KVKK KontrolÃ¼
            if (!kvkkOnay) {
                tg.HapticFeedback.notificationOccurred('error');
                tg.showAlert("LÃ¼tfen KVKK AydÄ±nlatma Metni'ni onaylayÄ±nÄ±z.");
                return;
            }

            tg.HapticFeedback.impactOccurred('medium');
            btn.innerText = "SÄ°STEME GÄ°RÄ°LÄ°YOR...";
            btn.disabled = true;

            // Webhook URL OluÅŸtur
            const webhookUrl = `https://asininventory.com/webhook/kayit-verisi-al?chat_id=${chat_id}&user_name=${user_name}&galeri_adi=${encodeURIComponent(gAdi)}&yetkili=${encodeURIComponent(yAdi)}&telefon=${encodeURIComponent(tNo)}&sehir=${encodeURIComponent(sSehir)}`;

            // KayÄ±t Ä°ÅŸlemi (Image Beacon)
            const img = new Image();
            img.onload = () => finishRegistration();
            img.onerror = () => setTimeout(finishRegistration, 1200);
            img.src = webhookUrl;
        }

        function finishRegistration() {
            tg.HapticFeedback.notificationOccurred('success');
            tg.showPopup({
                title: 'HoÅŸ Geldin! ğŸ',
                message: 'KaydÄ±nÄ±z ve 10 Ã¼cretsiz krediniz baÅŸarÄ±yla tanÄ±mlandÄ±. Åimdi ilk konseptinizi seÃ§ebilirsiniz.',
                buttons: [{type: 'ok', text: 'KONSEPT SEÃ‡'}]
            }, () => { 
                window.location.href = 'arka_fon.html'; 
            });
        }
    </script>
</body>
</html>
